<!DOCTYPE html>
<html lang="en">
<meta http-equiv="content-type" content="text/html;charset=utf-8" />
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="shortcut icon" href="../../assets/ico/favicon.png">

    <title>云相册管家</title>

    <!-- Bootstrap core CSS -->

    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
    <link href="dist/css/jasny-bootstrap.min.css" rel="stylesheet">
    <link href='http://fonts.googleapis.com/css?family=Raleway' rel='stylesheet' type='text/css'>
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <!-- Custom styles for this template -->
    <link href="css/navmenu-reveal.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">
    <!-- <link href="css/full-slider.css" rel="stylesheet"> -->

<!--    &lt;!&ndash; Bootstrap Core CSS &ndash;&gt;-->
<!--    <link href="bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">-->
    <!-- Menu CSS -->
    <link href="../plugins/bower_components/sidebar-nav/dist/sidebar-nav.min.css" rel="stylesheet">
    <!-- animation CSS -->
    <link href="css/animate.css" rel="stylesheet">
    <!-- Custom CSS -->
    <link href="css/Infostyle.css" rel="stylesheet">
    <!-- color CSS -->
    <link href="css/colors/default.css" id="theme" rel="stylesheet">
    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
    <script src="mySelfFunc.js"></script>
    <script type="text/javascript">
        function getPersonalMessage() {
            $.ajax({
                type:"get",
                url: "https://www.zjyxxn.cn/api/getPersonalInfo",
                dataType:'json',
                xhrFields: {
                    withCredentials: true // 发送Ajax时，Request header中会带上 Cookie 信息。
                },
                crossDomain: true, // 发送Ajax时，Request header 中会包含跨域的额外信息，但不会含cookie（作用不明，不会影响请求头的携带）
                success:function (data) {
                    console.debug(data)
                    name=data["name"]
                    age=data["age"]
                    sex=data["sex"]
                    phone=data["phone"]
                    birthday=data["birthday"]
                    password=data["password"]
                    VIPLevel=data["VIPLevel"]
                    document.getElementById('rname').value = name
                    document.getElementById('rphone').value = phone
                    document.getElementById('rage').value = age
                    document.getElementById('rsex').value = sex
                    document.getElementById('rbirthday').value = birthday
                    document.getElementById('rpwd').value = password
                    if(VIPLevel=="")
                        VIPLevel=0
                    document.getElementById('rvip').innerHTML = VIPLevel
                },
                error: function(XMLHttpRequest, textStatus, errorThrown) {
                    alert(XMLHttpRequest.status);
                    alert(XMLHttpRequest.readyState);
                    alert(textStatus);
                },
            });

        }
    </script>
</head>

<body onload="getPersonalMessage();userName();">
<div class="bar">
    <button type="button" class="navbar-toggle" data-toggle="offcanvas" data-recalc="false" data-target=".navmenu" data-canvas=".canvas">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
    </button>
</div>

<!--这个部分是左边功能区域-->
<div class="navmenu navmenu-default navmenu-fixed-left">
    <ul class="nav navmenu-nav">
        <li><a href="index.html">主页</a></li>
        <li><a href="personalPhotoAlbum.html">个人相册</a></li>
        <li><a href="dynamicAlbum.html">动态相册</a></li>
        <li><a href="custom.html">自定义相册</a></li>
        <li><a href="contact.html">联系我们</a></li>
        <li><a href="personInfo.html">个人信息</a></li>
        <li><a href="recycleBin.html">回收站</a></li>
        <li id="advanPart" href="javascript:void(0)" onclick="isVip()"><a>高级功能部分</a></li>

        <li><a href="../login.html">登录</a></li>
        <li><a onclick="logOff()">登出</a></li>
    </ul>

    <a id="welcome-user" class="navmenu-brand" href="#">
    </a>

    <div class="social">
        <a href="#"><i class="fa fa-twitter"></i></a>
        <a href="#"><i class="fa fa-facebook"></i></a>
        <a href="#"><i class="fa fa-instagram"></i></a>
        <a href="#"><i class="fa fa-pinterest-p"></i></a>
        <a href="#"><i class="fa fa-google-plus"></i></a>
        <a href="#"><i class="fa fa-skype"></i></a>
    </div>
    <div class="copyright-text">
        ©Copyright  可爱一只小小鸟
        <br>
        <a href="http://www.zjyxxn.cn" target="_blank">云相册管家</a>
        <br>
        <br>
    </div>
</div>
<!--功能向导区域结束-->

<div id="myCarousel" class="canvas carousel slide" data-ride="carousel">
        <div class="container-fluid">
            <div class="row bg-title">
                <div class="col-lg-3 col-md-4 col-sm-4 col-xs-12">
                    <h4 class="page-title">个人信息</h4>
                </div>
                <div class="col-lg-9 col-sm-8 col-md-8 col-xs-12">
                    <a href="#" target="_blank"
                       class="btn btn-danger pull-right m-l-20 hidden-xs hidden-sm waves-effect waves-light">主页</a>
                    <ol class="breadcrumb">
                        <li><a href="#">VIP等级：</a></li>
                        <li id="rvip" class="active">xxxxxxx</li>
                    </ol>
                </div>
            </div>
            <!-- /.row -->
            <!-- .row -->
            <div class="row">
                <div class="col-md-4 col-xs-12">
                    <div class="white-box">
                        <div class="user-bg"> <img width="100%" alt="user" src="">
                            <div class="overlay-box">
                                <div class="user-content">
                                    <a href="javascript:void(0)"><img src=""
                                                                      class="thumb-lg img-circle" alt="img"></a>
                                    <h4 class="text-white">User Name</h4>
                                    <h5 class="text-white">个人头像位置</h5>
                                </div>
                            </div>
                        </div>
                        <div class="user-btm-box">
                            <div class="col-md-4 col-sm-4 text-center">
                                <p class="text-purple"><i class="ti-facebook"></i></p>
                                <h1>猜猜</h1>
                            </div>
                            <div class="col-md-4 col-sm-4 text-center">
                                <p class="text-blue"><i class="ti-twitter"></i></p>
                                <h1>我是</h1>
                            </div>
                            <div class="col-md-4 col-sm-4 text-center">
                                <p class="text-danger"><i class="ti-dribbble"></i></p>
                                <h1>谁</h1>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-8 col-xs-12">
                    <div class="white-box">
                        <form class="form-horizontal form-material">
                            <div class="form-group">
                                <label class="col-md-12">名字</label>
                                <div class="col-md-12">
                                    <input id="rname" type="text" placeholder=""
                                           class="form-control form-control-line">
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-md-12">电话号码/ID</label>
                                <div class="col-md-12">
                                    <input id="rphone" type="text" placeholder=""
                                           class="form-control form-control-line">
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-md-12">密码</label>
                                <div class="col-md-12">
                                    <input id="rpwd" type="password" value="" class="form-control form-control-line">
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-md-12">出生日期</label>
                                <div class="col-md-12">
                                    <input id="rbirthday" type="text" placeholder=""
                                           class="form-control form-control-line">
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-md-12">性别</label>
                                <div class="col-md-12">
                                    <input id="rsex" type="text" placeholder=""
                                           class="form-control form-control-line">
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-md-12">年龄</label>
                                <div class="col-md-12">
                                    <input id="rage" type="text" placeholder=""
                                           class="form-control form-control-line">
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-12">居住地</label>
                                <div class="col-sm-12">
                                    <select class="form-control form-control-line">
                                        <option>地球</option>
                                        <option>月球</option>
                                        <option>火星</option>
                                        <option>M78星云</option>
                                        <option>太阳</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-12" onclick="update()">
                                    <button class="btn btn-success">提交</button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            <!-- /.row -->
        </div>
</div>

<script>
    function update() {
        var name=document.getElementById("rname")
        var phone=document.getElementById("rphone")
        var pwd=document.getElementById("rpwd")
        var sex=document.getElementById("rsex")
        var age=document.getElementById("rage")
        var birthday=document.getElementById("rbirthday")
        if(birthday == "" || birthday == "null"){
            birthday=""
        }
        urlRoot="https://www.zjyxxn.cn/api/modifypersonmsg?name="
        urlRoot+=name.value
        urlRoot+="&phone="
        urlRoot+=phone.value
        urlRoot+="&pwd="
        urlRoot+=pwd.value
        urlRoot+="&sex="
        urlRoot+=sex.value
        urlRoot+="&age="
        urlRoot+=age.value
        urlRoot+="&birthday="
        urlRoot+=birthday.value
        console.debug(urlRoot)
        $.ajax({
            type:"post",
            url: urlRoot,
            dataType:'text',
            xhrFields: {
                withCredentials: true // 发送Ajax时，Request header中会带上 Cookie 信息。
            },
            crossDomain: true, // 发送Ajax时，Request header 中会包含跨域的额外信息，但不会含cookie（作用不明，不会影响请求头的携带）
            success:function (data) {
                if(data==0){//修改成功
                    console.debug("0")
                    alter("修改成功，即将转到登录页面")
                    window.location.href="login.html"
                } else {//修改失败
                    alter("修改失败")
                    console.debug("1")
                    window.location.href="login.html"

                }
            },
            error:function () {
                console.debug("error")
                window.location.href="404/404.html"
            }
        });
    }
</script>
    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="js/jquery.min.js"></script>
    <script src="dist/js/jasny-bootstrap.min.js"></script>
    <script type="text/javascript" src="js/bootstrap.min.js"></script>
    <script src="js/main.js"></script>
    <script>
        $('.carousel').carousel({
            interval: 6000 //changes the speed
        })
    </script>
</body>
</html>
